请运行 bin/CookpadLiveDown.exe

下载过程简述
1.登录账号
2.下载JSON文件
3.创建工程
4.下载
5.转换
附1.文件选择
附2.下载参数设置
附3.技巧和提示

1.登录账号
只有需要下载JSON时需要登录账号，如果已有JSON文件则不需要登录账号
主界面选择1进入账号管理界面，再选择1登录，输入邮箱和密码即可
一般不需要存储密码，也可以保持登录状态
登录完成后按Q返回主界面

2.下载JSON文件
在手机上点分享，会得到类似于“https://www.cookpad.tv/episodes/1234”的分享链接
主界面选择2，将链接粘贴进窗口，
如果识别成功则会用登录的账号下载JSON文件，选择一个文件名保存即可
（文件选择细节详见附1）

3.创建工程
主界面选择3，进入创建工程界面
先载入上一步下载的JSON文件
输入数字选择要下载的流（直播流、全景模式流）、要下载的画质
最后选择一个空文件夹保存工程即可
如果选择的文件夹里面有文件，会提示是否清空文件夹，还请注意

4.下载
主界面选择4，进入下载界面，先选择上一步创建的工程文件夹
然后选择1立即下载，等待进度条走完即可
下载界面选择2或者3可以更改下载配置（详见附2）

5.转换
需要转封装到MP4时，先进入下载界面，然后选择4
输入生成的MP4文件路径（建议不要放在工程文件夹内），然后输入开始时间*
等待转封装完毕即可（仅仅转换封装，不重编码，不会降低画质）
*开始时间：一般下载的最高画质视频每段是12秒，所以选择12秒的倍数效果最好
其中给出的建议开始时间，是cookpad提供的大致开始时间
有时候可能会出现音画不同步的问题，此时请输入0即可，后期压制的时候再按需剪裁

附1.文件选择
需要选择文件时，会先显示提示符，此时可以直接输入想要的文件名
但希望图形界面选择文件名时，则可以直接按回车键，此时会弹出标准文件选择菜单

附2.下载参数设置
用记事本（或者其他文本编辑器）打开“downloader_option.json”编辑
注意：每一条（除了最后一条）后都需要有英文逗号隔开
默认配置：（可以在下载菜单选择3恢复默认）
"chunk_size": 10240
每次下载的块大小，应该对下载速度影响不大，网络不畅时如果使用较大块大小，可能会卡住更长时间（详见下方）
"timeout_connect": 10
连接超时时间（秒）
"timeout_read": 10
下载超时时间（秒），指如果x秒内没有收到1个字节数据，则视为下载超时
"min_rate": 5120
最小下载速度（字节/秒）
由于GFW，有时候下载较大文件时速度会逐渐降低，此时重新连接可使速度成倍提升。如果下载某一块的速度低于该速度则断开重连。因为使用了断点续传，同一块不会重复下载两次。如果网络较差，正常下载时也经常断开，请降低此数值。
"headers": {}
HTTP请求头，一般不需要修改，如果无法下载请联系作者
"cookies": {}
HTTP cookie，同上
"proxies": {}
代理，如果需要使用代理上网，请配置为以下格式："proxies": {"http": "http://127.0.0.1:12345", "https": "http://127.0.0.1:12345"}
"temp_suffix": ".download"
下载临时文件的后缀名
"retry": 3
重试次数。由于下载速度太低而断开时，不算入重试
"retry_delay": 1
重试的间隔时间（秒）
"use_validator": true
是否验证数据完整性（true / false），使用一个hack（技巧）来判断文件是否完整，从而防止下载到损坏的文件。但是该hack未来可能会失效，如果无法下载任何文件，请关掉该选项并联系作者
（详见：https://stackoverflow.com/questions/12186993）
"validator_chunk_size": 10485760
验证时的分块大小（10MB），同上，会影响验证结果
"validate_retry": 1
验证失败的重试次数
"queue_size": 3
同时下载的文件数量，大量小文件时可以增大该数值；下载大文件时调大该值并不会显著提高下载速度（因为有最小下载速度机制）
"progress_bar_ascii": true
进度条是否使用ASCII，因为旧版Windows控制台的bug，显示平滑的进度条可能会出现问题，如果你用的是最新版的Windows 10，可以选择null，使其自动使用平滑进度条
"hide_progress_bar": false
下载时是否不显示进度条，只显示状态变换文字。建议在将输出重定向到文件时使用
"no_output": false
下载时是否完全不输出

附3.技巧和提示
* CookpadLive的回放视频，首播一年之后App中就无法播放，此后再下载的JSON也无法正常下载视频（表现为没有流）；但如果此前下载了JSON，则可以继续下载视频。猜测是因为视频文件尚未删除，只是隐藏了访问入口。但建议还是尽快下载存档，以防后续视频文件删除。
* 在第四步下载完成后，所有重建视频需要的文件都已全部下载到电脑，此时就可以把工程文件夹存档/备份了，即使以后Cookpad服务器挂掉，也能转换出MP4视频
* 此程序包含了FFmpeg，再也不需要为配置环境变量而纠结了
* 下载时按Ctrl-C可以终止下载，已下载的文件不会重复下载。如果强制退出，下载到一半的文件会在下次启动时清理掉，并重新下载
* 如果账号没有黄金会员，下载的JSON中的视频流就不包含Special time；如果使用黄金会员的账号登录并下载JSON，之后即使会员过期，也可以继续下载Special Time视频
